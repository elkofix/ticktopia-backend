{
	"info": {
		"_postman_id": "dee3ab20-6fe0-4039-aa88-bf2c6293ab04",
		"name": "Integration Test Backend-Ticktopia",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "38775841"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "POST",
					"item": [
						{
							"name": "LOGIN EXITING USER",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body has user and token properties\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('user');\r",
											"    pm.expect(responseBody).to.have.property('token');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"{{ticketEmail}}\",\r\n    \"password\": \"{{password}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/login",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "LOGIN USER NOT FOUND",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Response status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has the expected message\", function () {\r",
											"    pm.expect(pm.response.json().message).to.equal(\"User with email any@mail.com not found\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has the expected error\", function () {\r",
											"    pm.expect(pm.response.json().error).to.equal(\"Unauthorized\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has the expected statusCode\", function () {\r",
											"    pm.expect(pm.response.json().statusCode).to.equal(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"any@mail.com\",\r\n    \"password\": \"anypassword\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/login",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "LOGIN USER NO FIELDS",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"// Test for presence of error field\r",
											"pm.test(\"Error field exists in the response\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('error');\r",
											"});\r",
											"\r",
											"// Test for specific error messages\r",
											"pm.test(\"Error message for email validation\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('message');\r",
											"    pm.expect(responseBody.message).to.be.an('array').that.includes('email must be an email');\r",
											"    pm.expect(responseBody.message).to.be.an('array').that.includes('email must be a string');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/login",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "REGISTER USER",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body has user and token properties\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('user');\r",
											"    pm.expect(responseBody).to.have.property('token');\r",
											"});\r",
											"\r",
											"// Test for response body user properties\r",
											"pm.test(\"User object has expected properties\", function () {\r",
											"    const user = pm.response.json().user;\r",
											"    pm.expect(user).to.have.property('id');\r",
											"    pm.expect(user).to.have.property('email');\r",
											"    pm.expect(user).to.have.property('name');\r",
											"    pm.expect(user).to.have.property('lastname');\r",
											"    pm.expect(user).to.have.property('isActive');\r",
											"    pm.expect(user).to.have.property('roles');\r",
											"    pm.expect(user.roles).to.be.an('array');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"{{$randomEmail}}\",\r\n    \"password\": \"{{$randomPassword}}\",\r\n    \"name\": \"{{$randomFirstName}}\",\r\n    \"lastname\": \"{{$randomLastName}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/register",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "REGISTER EVENT MANAGE USER AS ADMIN",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body has user and token properties\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('user');\r",
											"    pm.expect(responseBody).to.have.property('token');\r",
											"});\r",
											"\r",
											"// Test for response body user properties\r",
											"pm.test(\"User object has expected properties\", function () {\r",
											"    const user = pm.response.json().user;\r",
											"    pm.expect(user).to.have.property('id');\r",
											"    pm.expect(user).to.have.property('email');\r",
											"    pm.expect(user).to.have.property('name');\r",
											"    pm.expect(user).to.have.property('lastname');\r",
											"    pm.expect(user).to.have.property('isActive');\r",
											"    pm.expect(user).to.have.property('roles');\r",
											"    pm.expect(user.roles).to.be.an('array');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"const url = pm.collectionVariables.get(\"base_url\")\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Guardar el email aleatorio en la variable de colección\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Login como admin y guardar el token\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/login`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email, // <-- Reemplaza con un email de admin válido\r",
											"            password: password   // <-- Reemplaza con su contraseña\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en login admin:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo token del admin.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del admin guardado:\", token);\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Isabella\",\r",
											"                lastname: \"Ocampo\",\r",
											"                password: password,\r",
											"                email: randomEmail\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear usuario:\", err);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res.json().user;\r",
											"        console.log(user)\r",
											"        if (user && user.id) {\r",
											"            pm.collectionVariables.set(\"userId\", user.id);\r",
											"            console.log(\"Usuario creado. ID guardado:\", user.id);\r",
											"        } else {\r",
											"            console.log(\"No se encontró el ID del usuario en la respuesta.\");\r",
											"        }\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"{{$randomEmail}}\",\r\n    \"password\": \"{{$randomPassword}}\",\r\n    \"name\": \"{{$randomFirstName}}\",\r\n    \"lastname\": \"{{$randomLastName}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/register/event-manager",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"register",
										"event-manager"
									]
								}
							},
							"response": []
						},
						{
							"name": "REGISTER EVENT MANAGE USER AS NOT ADMIN",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for the status code\r",
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"// Test for the error type\r",
											"pm.test(\"Error type is Forbidden\", function () {\r",
											"    pm.expect(pm.response.json().error).to.equal(\"Forbidden\");\r",
											"});\r",
											"\r",
											"// Test for the statusCode field\r",
											"pm.test(\"StatusCode field is 403\", function () {\r",
											"    pm.expect(pm.response.json().statusCode).to.equal(403);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"{{$randomEmail}}\",\r\n    \"password\": \"{{$randomPassword}}\",\r\n    \"name\": \"{{$randomFirstName}}\",\r\n    \"lastname\": \"{{$randomLastName}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/register/event-manager",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"register",
										"event-manager"
									]
								}
							},
							"response": []
						},
						{
							"name": "REGISTER EVENT MANAGE USER AS UNAUTHENTICATED",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// Test for response message\r",
											"pm.test(\"Response message is Unauthorized\", function () {\r",
											"    pm.expect(pm.response.json().message).to.equal(\"Unauthorized\");\r",
											"});\r",
											"\r",
											"// Test for response statusCode\r",
											"pm.test(\"Response statusCode is 401\", function () {\r",
											"    pm.expect(pm.response.json().statusCode).to.equal(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"{{$randomEmail}}\",\r\n    \"password\": \"{{$randomPassword}}\",\r\n    \"name\": \"{{$randomFirstName}}\",\r\n    \"lastname\": \"{{$randomLastName}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/register/event-manager",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"register",
										"event-manager"
									]
								}
							},
							"response": []
						},
						{
							"name": "REGISTER USER ALREADY REGISTERED",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for the status code\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"// Test for response message\r",
											"pm.test(\"Response message is present\", function () {\r",
											"    const response = pm.response.json();\r",
											"    pm.expect(response.message).to.exist;\r",
											"    pm.expect(response.message).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Test for error field\r",
											"pm.test(\"Error field is present\", function () {\r",
											"    const response = pm.response.json();\r",
											"    pm.expect(response.error).to.exist;\r",
											"    pm.expect(response.error).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Test for statusCode field\r",
											"pm.test(\"StatusCode field is present\", function () {\r",
											"    const response = pm.response.json();\r",
											"    pm.expect(response.statusCode).to.exist;\r",
											"    pm.expect(response.statusCode).to.be.a('number');\r",
											"});\r",
											"\r",
											"// Test for the content type\r",
											"pm.test(\"Content type is application/json\", function () {\r",
											"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"{{superadminEmail}}\",\r\n    \"password\": \"Hola1597!!!!\",\r\n    \"name\": \"{{$randomFirstName}}\",\r\n    \"lastname\": \"{{$randomLastName}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/register",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "REGISTER USER NO FIELDS",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test 1: Verify the response status code is 400\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"// Test 2: Verify the response message is an array\r",
											"pm.test(\"Response message is an array\", function () {\r",
											"    pm.expect(pm.response.json().message).to.be.an('array');\r",
											"});\r",
											"\r",
											"// Test 3: Verify the response body contains the expected error message\r",
											"pm.test(\"Response body contains the expected error message\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.error).to.equal(\"Bad Request\");\r",
											"});\r",
											"\r",
											"// Test 4: Verify the response body contains the expected status code\r",
											"pm.test(\"Response body contains the expected status code\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.statusCode).to.equal(400);\r",
											"});\r",
											"\r",
											"// Test 5: Verify the response includes specific error messages\r",
											"pm.test(\"Response includes specific error messages\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.message).to.deep.include.members([\"email must be an email\", \"email must be a string\"]);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/register",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"register"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "GET",
					"item": [
						{
							"name": "FIND USERS ALL USERS AS ADMIN",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test for content type\r",
											"pm.test(\"Content type is application/json\", function () {\r",
											"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// Test for array elements\r",
											"const response = pm.response.json();\r",
											"for (let i = 0; i < response.length; i++) {\r",
											"    pm.test(`User ${i + 1} has an ID`, function () {\r",
											"        pm.expect(response[i].id).to.exist;\r",
											"    });\r",
											"    pm.test(`User ${i + 1} has a valid email`, function () {\r",
											"        pm.expect(response[i].email).to.be.a('string');\r",
											"    });\r",
											"    pm.test(`User ${i + 1} has roles`, function () {\r",
											"        pm.expect(response[i].roles).to.be.an('array');\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND USERS ALL USERS AS NOT ADMIN",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body has expected properties\", function () {\r",
											"    pm.response.to.have.jsonBody(\"message\");\r",
											"    pm.response.to.have.jsonBody(\"error\");\r",
											"    pm.response.to.have.jsonBody(\"statusCode\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND USERS ALL USERS AS UNAUTHENTICATED",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"\r",
											"pm.test(\"Response body has message field\", function () {\r",
											"    pm.expect(pm.response.json().message).to.exist;\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has statusCode field\", function () {\r",
											"    pm.expect(pm.response.json().statusCode).to.exist;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND ONE USER AS ADMIN",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"const url = pm.collectionVariables.get(\"base_url\")\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Guardar el email aleatorio en la variable de colección\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Login como admin y guardar el token\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/login`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email, // <-- Reemplaza con un email de admin válido\r",
											"            password: password   // <-- Reemplaza con su contraseña\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en login admin:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo token del admin.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del admin guardado:\", token);\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Isabella\",\r",
											"                lastname: \"Ocampo\",\r",
											"                password: password,\r",
											"                email: randomEmail\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear usuario:\", err);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res.json().user;\r",
											"        console.log(user)\r",
											"        if (user && user.id) {\r",
											"            pm.collectionVariables.set(\"userId\", user.id);\r",
											"            console.log(\"Usuario creado. ID guardado:\", user.id);\r",
											"        } else {\r",
											"            console.log(\"No se encontró el ID del usuario en la respuesta.\");\r",
											"        }\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND ONE USER AS ADMIN NOT FOUND",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"const url = pm.collectionVariables.get(\"base_url\")\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Guardar el email aleatorio en la variable de colección\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Login como admin y guardar el token\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/login`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email, // <-- Reemplaza con un email de admin válido\r",
											"            password: password   // <-- Reemplaza con su contraseña\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en login admin:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo token del admin.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del admin guardado:\", token);\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Isabella\",\r",
											"                lastname: \"Ocampo\",\r",
											"                password: password,\r",
											"                email: randomEmail\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear usuario:\", err);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res.json().user;\r",
											"        console.log(user)\r",
											"        if (user && user.id) {\r",
											"            pm.collectionVariables.set(\"userId\", user.id);\r",
											"            console.log(\"Usuario creado. ID guardado:\", user.id);\r",
											"        } else {\r",
											"            console.log(\"No se encontró el ID del usuario en la respuesta.\");\r",
											"        }\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for the response status code\r",
											"pm.test(\"Status code is 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"\r",
											"// Test for the presence of the 'message' field in the response body\r",
											"pm.test(\"Response body has 'message' field\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.message).to.exist;\r",
											"});\r",
											"// Test for the presence of the 'error' field in the response body\r",
											"pm.test(\"Response body has 'error' field\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.error).to.exist;\r",
											"});\r",
											"// Test for the presence of the 'statusCode' field in the response body\r",
											"pm.test(\"Response body has 'statusCode' field\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.statusCode).to.exist;\r",
											"});// Test for the presence of specific fields in the response body\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{$randomUUID}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{$randomUUID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND ONE USER AS NOT ADMIN",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test 1: Verify the status code is 200 OK\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test 3: Verify the response body is not empty\r",
											"pm.test(\"Response body is not empty\", function () {\r",
											"    pm.expect(pm.response.text()).to.not.be.empty;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND ONE USER AS NOT ADMIN NOT MYSELF",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Generar primer correo y registrar usuario para obtener el token\r",
											"const firstEmail = generateRandomEmail();\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: firstEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar primer usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo el token del primer usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del primer usuario registrado:\", token);\r",
											"\r",
											"    // Registrar segundo usuario para obtener el ID\r",
											"    const secondEmail = generateRandomEmail();\r",
											"    pm.collectionVariables.set(\"randomEmail\", secondEmail); // Si lo necesitas luego\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Camila\",\r",
											"                lastname: \"Ramírez\",\r",
											"                email: secondEmail,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err2, res2) {\r",
											"        if (err2) {\r",
											"            console.log(\"Error al registrar segundo usuario:\", err2);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res2.json().user;\r",
											"        if (!user || !user.id) {\r",
											"            console.log(\"No se obtuvo el ID del segundo usuario.\");\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        pm.collectionVariables.set(\"userId\", user.id);\r",
											"        console.log(\"ID del segundo usuario registrado:\", user.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body has message, error, and statusCode\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('message');\r",
											"    pm.expect(responseBody).to.have.property('error');\r",
											"    pm.expect(responseBody).to.have.property('statusCode');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND ONE USER AS UNAUNTHETHICATED",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is less than 500ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has the expected message\", function () {\r",
											"    pm.expect(pm.response.json().message).to.equal(\"Unauthorized\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has the expected status code\", function () {\r",
											"    pm.expect(pm.response.json().statusCode).to.equal(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "PUT",
					"item": [
						{
							"name": "UPDATE MYSELF",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test to validate the status code\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test to validate the response body properties\r",
											"pm.test(\"Response body has the required properties\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.id).to.exist;\r",
											"    pm.expect(responseBody.email).to.exist;\r",
											"    pm.expect(responseBody.name).to.exist;\r",
											"    pm.expect(responseBody.lastname).to.exist;\r",
											"    pm.expect(responseBody.isActive).to.exist;\r",
											"    pm.expect(responseBody.roles).to.exist;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Valentina\",\r\n    \"lastname\": \"Ocampos\",\r\n    \"email\": \"{{randomEmail}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE NOT MYSELF",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Generar primer correo y registrar usuario para obtener el token\r",
											"const firstEmail = generateRandomEmail();\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: firstEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar primer usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo el token del primer usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del primer usuario registrado:\", token);\r",
											"\r",
											"    // Registrar segundo usuario para obtener el ID\r",
											"    const secondEmail = generateRandomEmail();\r",
											"    pm.collectionVariables.set(\"randomEmail\", secondEmail); // Si lo necesitas luego\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Camila\",\r",
											"                lastname: \"Ramírez\",\r",
											"                email: secondEmail,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err2, res2) {\r",
											"        if (err2) {\r",
											"            console.log(\"Error al registrar segundo usuario:\", err2);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res2.json().user;\r",
											"        if (!user || !user.id) {\r",
											"            console.log(\"No se obtuvo el ID del segundo usuario.\");\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        pm.collectionVariables.set(\"userId\", user.id);\r",
											"        console.log(\"ID del segundo usuario registrado:\", user.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has expected properties\", function () {\r",
											"    pm.response.to.have.jsonBody(\"message\");\r",
											"    pm.response.to.have.jsonBody(\"error\");\r",
											"    pm.response.to.have.jsonBody(\"statusCode\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Valentina\",\r\n    \"lastname\": \"Ocampos\",\r\n    \"email\": \"{{randomEmail}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE MYSELF UNWANTED PROPERTIES",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body contains expected properties\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('message');\r",
											"    pm.expect(responseBody).to.have.property('error');\r",
											"    pm.expect(responseBody).to.have.property('statusCode');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Valentina\",\r\n    \"lastname\": \"Ocampo\",\r\n    \"password\": \"password\",\r\n    \"email\": \"{{randomEmail}}\",\r\n    \"role\": \"event-manager\",\r\n    \"isActive\": true\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE UNAUTHENTICATED",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// Test for response time\r",
											"pm.test(\"Response time is less than 500ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response contains expected properties\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property(\"message\");\r",
											"    pm.expect(responseBody).to.have.property(\"statusCode\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Valentina\",\r\n    \"lastname\": \"Ocampos\",\r\n    \"email\": \"{{randomEmail}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "DELETE",
					"item": [
						{
							"name": "DELETE MYSELF",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Content type is application/json\", function () {\r",
											"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"pm.test(\"Verify message in the response\", function () {\r",
											"    pm.expect(pm.response.json().message).to.include(\"User\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE MYSELF ALREADY DELETED",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has expected properties\", function () {\r",
											"    pm.response.to.have.jsonBody('message');\r",
											"    pm.response.to.have.jsonBody('error');\r",
											"    pm.response.to.have.jsonBody('statusCode');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const randomEmail = generateRandomEmail();\r",
											"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
											"\r",
											"// Registrar un nuevo usuario\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: randomEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const user = res.json().user;\r",
											"    const token = res.json().token;\r",
											"    if (!user || !user.id || !token) {\r",
											"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"userId\", user.id);\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"\r",
											"    console.log(\"Usuario registrado. ID:\", user.id);\r",
											"    console.log(\"Usuario registrado. Token:\", token);\r",
											"\r",
											"    // Eliminar el usuario recién creado\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/users/${user.id}`,\r",
											"        method: \"DELETE\",\r",
											"        header: {\r",
											"            \"Authorization\": `Bearer ${token}`,\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        }\r",
											"    }, function (deleteErr, deleteRes) {\r",
											"        if (deleteErr) {\r",
											"            console.log(\"Error al eliminar el usuario:\", deleteErr);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        console.log(\"Usuario eliminado. Status:\", deleteRes.status);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE MYSELF NOT MYSELF Copy",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has expected properties\", function () {\r",
											"    pm.response.to.have.jsonBody(\"message\");\r",
											"    pm.response.to.have.jsonBody(\"error\");\r",
											"    pm.response.to.have.jsonBody(\"statusCode\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Generar primer correo y registrar usuario para obtener el token\r",
											"const firstEmail = generateRandomEmail();\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: firstEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar primer usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo el token del primer usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del primer usuario registrado:\", token);\r",
											"\r",
											"    // Registrar segundo usuario para obtener el ID\r",
											"    const secondEmail = generateRandomEmail();\r",
											"    pm.collectionVariables.set(\"randomEmail\", secondEmail); // Si lo necesitas luego\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Camila\",\r",
											"                lastname: \"Ramírez\",\r",
											"                email: secondEmail,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err2, res2) {\r",
											"        if (err2) {\r",
											"            console.log(\"Error al registrar segundo usuario:\", err2);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res2.json().user;\r",
											"        if (!user || !user.id) {\r",
											"            console.log(\"No se obtuvo el ID del segundo usuario.\");\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        pm.collectionVariables.set(\"userId\", user.id);\r",
											"        console.log(\"ID del segundo usuario registrado:\", user.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE UNAUTHENTICATED",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is less than 100ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(100);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has message field\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property('message');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Generar un correo electrónico aleatorio\r",
											"function generateRandomEmail() {\r",
											"    const randomString = Math.random().toString(36).substring(2, 10);\r",
											"    return `user_${randomString}@example.com`;\r",
											"}\r",
											"\r",
											"const url = pm.collectionVariables.get(\"base_url\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"// Generar primer correo y registrar usuario para obtener el token\r",
											"const firstEmail = generateRandomEmail();\r",
											"pm.sendRequest({\r",
											"    url: `${url}/api/auth/register`,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            name: \"Isabella\",\r",
											"            lastname: \"Ocampo\",\r",
											"            email: firstEmail,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al registrar primer usuario:\", err);\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    const token = res.json().token;\r",
											"    if (!token) {\r",
											"        console.log(\"No se obtuvo el token del primer usuario.\");\r",
											"        return;\r",
											"    }\r",
											"\r",
											"    pm.collectionVariables.set(\"token\", token);\r",
											"    console.log(\"Token del primer usuario registrado:\", token);\r",
											"\r",
											"    // Registrar segundo usuario para obtener el ID\r",
											"    const secondEmail = generateRandomEmail();\r",
											"    pm.collectionVariables.set(\"randomEmail\", secondEmail); // Si lo necesitas luego\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: `${url}/api/auth/register`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                name: \"Camila\",\r",
											"                lastname: \"Ramírez\",\r",
											"                email: secondEmail,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err2, res2) {\r",
											"        if (err2) {\r",
											"            console.log(\"Error al registrar segundo usuario:\", err2);\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        const user = res2.json().user;\r",
											"        if (!user || !user.id) {\r",
											"            console.log(\"No se obtuvo el ID del segundo usuario.\");\r",
											"            return;\r",
											"        }\r",
											"\r",
											"        pm.collectionVariables.set(\"userId\", user.id);\r",
											"        console.log(\"ID del segundo usuario registrado:\", user.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/auth/users/{{userId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"auth",
										"users",
										"{{userId}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Roles",
			"item": [
				{
					"name": "UPDATE ROLES TO USER AS ADMIN",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar un correo electrónico aleatorio\r",
									"function generateRandomEmail() {\r",
									"    const randomString = Math.random().toString(36).substring(2, 10);\r",
									"    return `user_${randomString}@example.com`;\r",
									"}\r",
									"const url = pm.collectionVariables.get(\"base_url\")\r",
									"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"\r",
									"// Guardar el email aleatorio en la variable de colección\r",
									"const randomEmail = generateRandomEmail();\r",
									"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
									"\r",
									"// Login como admin y guardar el token\r",
									"pm.sendRequest({\r",
									"    url: `${url}/api/auth/login`,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            email: email, // <-- Reemplaza con un email de admin válido\r",
									"            password: password   // <-- Reemplaza con su contraseña\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error en login admin:\", err);\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    const token = res.json().token;\r",
									"\r",
									"    if (!token) {\r",
									"        console.log(\"No se obtuvo token del admin.\");\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    pm.collectionVariables.set(\"token\", token);\r",
									"    console.log(\"Token del admin guardado:\", token);\r",
									"\r",
									"    pm.sendRequest({\r",
									"        url: `${url}/api/auth/register`,\r",
									"        method: \"POST\",\r",
									"        header: {\r",
									"            \"Content-Type\": \"application/json\",\r",
									"        },\r",
									"        body: {\r",
									"            mode: \"raw\",\r",
									"            raw: JSON.stringify({\r",
									"                name: \"Isabella\",\r",
									"                lastname: \"Ocampo\",\r",
									"                password: password,\r",
									"                email: randomEmail\r",
									"            })\r",
									"        }\r",
									"    }, function (err, res) {\r",
									"        if (err) {\r",
									"            console.log(\"Error al crear usuario:\", err);\r",
									"            return;\r",
									"        }\r",
									"\r",
									"        const user = res.json().user;\r",
									"        console.log(user)\r",
									"        if (user && user.id) {\r",
									"            pm.collectionVariables.set(\"userId\", user.id);\r",
									"            console.log(\"Usuario creado. ID guardado:\", user.id);\r",
									"        } else {\r",
									"            console.log(\"No se encontró el ID del usuario en la respuesta.\");\r",
									"        }\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test 1: Verify the response status code is 200\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"\r",
									"// Test 3: Verify the updated roles in the response\r",
									"pm.test(\"Verify the updated roles in the response\", function () {\r",
									"    const response = pm.response.json();\r",
									"    pm.expect(response.roles).to.eql([\"event-manager\"]);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"roles\": [\"event-manager\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/users/roles/{{userId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"users",
								"roles",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "UPDATE ROLES TO USER AS ADMIN INVALID ROLE",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar un correo electrónico aleatorio\r",
									"function generateRandomEmail() {\r",
									"    const randomString = Math.random().toString(36).substring(2, 10);\r",
									"    return `user_${randomString}@example.com`;\r",
									"}\r",
									"const url = pm.collectionVariables.get(\"base_url\")\r",
									"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"\r",
									"// Guardar el email aleatorio en la variable de colección\r",
									"const randomEmail = generateRandomEmail();\r",
									"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
									"\r",
									"// Login como admin y guardar el token\r",
									"pm.sendRequest({\r",
									"    url: `${url}/api/auth/login`,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            email: email, // <-- Reemplaza con un email de admin válido\r",
									"            password: password   // <-- Reemplaza con su contraseña\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error en login admin:\", err);\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    const token = res.json().token;\r",
									"\r",
									"    if (!token) {\r",
									"        console.log(\"No se obtuvo token del admin.\");\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    pm.collectionVariables.set(\"token\", token);\r",
									"    console.log(\"Token del admin guardado:\", token);\r",
									"\r",
									"    pm.sendRequest({\r",
									"        url: `${url}/api/auth/register`,\r",
									"        method: \"POST\",\r",
									"        header: {\r",
									"            \"Content-Type\": \"application/json\",\r",
									"        },\r",
									"        body: {\r",
									"            mode: \"raw\",\r",
									"            raw: JSON.stringify({\r",
									"                name: \"Isabella\",\r",
									"                lastname: \"Ocampo\",\r",
									"                password: password,\r",
									"                email: randomEmail\r",
									"            })\r",
									"        }\r",
									"    }, function (err, res) {\r",
									"        if (err) {\r",
									"            console.log(\"Error al crear usuario:\", err);\r",
									"            return;\r",
									"        }\r",
									"\r",
									"        const user = res.json().user;\r",
									"        console.log(user)\r",
									"        if (user && user.id) {\r",
									"            pm.collectionVariables.set(\"userId\", user.id);\r",
									"            console.log(\"Usuario creado. ID guardado:\", user.id);\r",
									"        } else {\r",
									"            console.log(\"No se encontró el ID del usuario en la respuesta.\");\r",
									"        }\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test 1: Check the response status code\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"// Test 2: Verify the response body structure and content\r",
									"pm.test(\"Response contains error message and statusCode\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.be.an('array').that.is.not.empty;\r",
									"    pm.expect(responseBody.error).to.equal(\"Bad Request\");\r",
									"    pm.expect(responseBody.statusCode).to.equal(400);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"roles\": [\"event-managers\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/users/roles/{{userId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"users",
								"roles",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "UPDATE ROLES TO USER NOT ADMIN",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar un correo electrónico aleatorio\r",
									"function generateRandomEmail() {\r",
									"    const randomString = Math.random().toString(36).substring(2, 10);\r",
									"    return `user_${randomString}@example.com`;\r",
									"}\r",
									"\r",
									"const url = pm.collectionVariables.get(\"base_url\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"const randomEmail = generateRandomEmail();\r",
									"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
									"\r",
									"// Registrar un nuevo usuario\r",
									"pm.sendRequest({\r",
									"    url: `${url}/api/auth/register`,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            name: \"Isabella\",\r",
									"            lastname: \"Ocampo\",\r",
									"            email: randomEmail,\r",
									"            password: password\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error al registrar usuario:\", err);\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    const user = res.json().user;\r",
									"    const token = res.json().token;\r",
									"    if (!user || !user.id || !token) {\r",
									"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    pm.collectionVariables.set(\"userId\", user.id);\r",
									"    pm.collectionVariables.set(\"token\", token);\r",
									"\r",
									"    console.log(\"Usuario registrado. ID:\", user.id);\r",
									"    console.log(\"Usuario registrado. Token:\", token);\r",
									"\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test 1: Verify the status code is 403\r",
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"\r",
									"// Test 2: Verify the response message for the forbidden error\r",
									"pm.test(\"Verify the response message for the forbidden error\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.error).to.eql(\"Forbidden\");\r",
									"    pm.expect(responseBody.statusCode).to.eql(403);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"roles\": [\"event-managers\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/users/roles/{{userId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"users",
								"roles",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "UPDATE ROLES TO USER UNAUTHENTICATED",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar un correo electrónico aleatorio\r",
									"function generateRandomEmail() {\r",
									"    const randomString = Math.random().toString(36).substring(2, 10);\r",
									"    return `user_${randomString}@example.com`;\r",
									"}\r",
									"\r",
									"const url = pm.collectionVariables.get(\"base_url\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"const randomEmail = generateRandomEmail();\r",
									"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
									"\r",
									"// Registrar un nuevo usuario\r",
									"pm.sendRequest({\r",
									"    url: `${url}/api/auth/register`,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            name: \"Isabella\",\r",
									"            lastname: \"Ocampo\",\r",
									"            email: randomEmail,\r",
									"            password: password\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error al registrar usuario:\", err);\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    const user = res.json().user;\r",
									"    const token = res.json().token;\r",
									"    if (!user || !user.id || !token) {\r",
									"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    pm.collectionVariables.set(\"userId\", user.id);\r",
									"    pm.collectionVariables.set(\"token\", token);\r",
									"\r",
									"    console.log(\"Usuario registrado. ID:\", user.id);\r",
									"    console.log(\"Usuario registrado. Token:\", token);\r",
									"\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for the PUT request to update user roles\r",
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has message and statusCode\", function () {\r",
									"    pm.response.to.have.jsonBody('message');\r",
									"    pm.response.to.have.jsonBody('statusCode');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"roles\": [\"event-managers\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/users/roles/{{userId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"users",
								"roles",
								"{{userId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Events",
			"item": [
				{
					"name": "POST",
					"item": [
						{
							"name": "CREATE EVENT",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Event has correct properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"name\");\r",
											"    pm.expect(jsonData).to.have.property(\"bannerPhotoUrl\");\r",
											"    pm.expect(jsonData).to.have.property(\"isPublic\");\r",
											"\r",
											"    console.log(\"✅ Propiedades verificadas:\", {\r",
											"        name: jsonData.name,\r",
											"        bannerPhotoUrl: jsonData.bannerPhotoUrl,\r",
											"        isPublic: jsonData.isPublic\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Concierto de Rock\",\r\n    \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r\n    \"isPublic\": true\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/create",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "CREATE EVENT WITH UNAUTHORIZED USER",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 403 Forbidden con formato de mensaje válido\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"    pm.response.to.have.jsonBody();\r",
											"\r",
											"    const jsonData = pm.response.json();\r",
											"    \r",
											"    // Verifica que el mensaje tenga el formato: \"User <algo> needs a valid role\"\r",
											"    pm.expect(jsonData.message).to.match(/^User .* needs a valid role$/);\r",
											"\r",
											"    console.log(\"✅ Mensaje con formato válido:\", jsonData.message);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Tech Conference\",\r\n    \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r\n    \"isPublic\": true,\r\n    \"userId\": \"user123\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/create",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"create"
									]
								}
							},
							"response": []
						},
						{
							"name": "CREATE EVENT NO AUTH",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 401 Forbidden con formato de mensaje válido\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"    pm.response.to.have.jsonBody();\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Tech Conference\",\r\n    \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r\n    \"isPublic\": true,\r\n    \"userId\": \"user123\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/create",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"create"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "GET",
					"item": [
						{
							"name": "FIND ALL EVENTS",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"array\");\r",
											"});\r",
											"\r",
											"pm.test(\"Each event has expected properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    jsonData.forEach(event => {\r",
											"        pm.expect(event).to.have.property(\"id\");\r",
											"        pm.expect(event).to.have.property(\"name\");\r",
											"        pm.expect(event).to.have.property(\"bannerPhotoUrl\");\r",
											"        pm.expect(event).to.have.property(\"isPublic\");\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true,
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/findAll",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"findAll"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND EVENT BY ID",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains the expected event properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"name\");\r",
											"    pm.expect(jsonData).to.have.property(\"bannerPhotoUrl\");\r",
											"    pm.expect(jsonData).to.have.property(\"isPublic\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/find/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"find",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "FIND EVENT BY ID NOT FOUND",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Código de estado debe ser 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"El cuerpo debe contener mensaje de error correcto\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"error\", \"Not Found\");\r",
											"    pm.expect(jsonData).to.have.property(\"statusCode\", 404);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/find/{{$randomUUID}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"find",
										"{{$randomUUID}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "PUT",
					"item": [
						{
							"name": "UPDATE EXISTING EVENT MINE",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            console.log(\"evento\", res.json())\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains updated event properties\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData.name).to.equal(\"Concierto de Jazz\");\r",
											"    pm.expect(jsonData.bannerPhotoUrl).to.equal(\"https://example.com/new-banner.jpg\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Concierto de Jazz\",\r\n    \"bannerPhotoUrl\": \"https://example.com/new-banner.jpg\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/update/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"update",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE EXISTING EVENT NOT MINE",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para hacer login con otro usuario\r",
											"function loginConSamubar() {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: \"samubar@gmail.com\",\r",
											"                password: password // Usamos la misma contraseña, puedes cambiarla si es distinta\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al hacer login con samubar:\", err);\r",
											"        } else {\r",
											"            const nuevoToken = res.json().token;\r",
											"            if (nuevoToken) {\r",
											"                pm.collectionVariables.set(\"token\", nuevoToken);\r",
											"                console.log(\"Nuevo token guardado para samubar@gmail.com:\", nuevoToken);\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta de samubar.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"                loginConSamubar(); // Hacer login con el otro usuario después de crear el evento\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente);\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"El status debe ser 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"El body debe contener un mensaje de error\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"message\", \"You can only update your own events\");\r",
											"    pm.expect(jsonData).to.have.property(\"error\", \"Forbidden\");\r",
											"    pm.expect(jsonData).to.have.property(\"statusCode\", 403);\r",
											"});\r",
											"\r",
											"pm.test(\"El tipo de respuesta debe ser JSON\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    pm.response.to.be.withBody;\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Concierto de Jazz\",\r\n    \"bannerPhotoUrl\": \"https://example.com/new-banner.jpg\",\r\n    \"isPublic\": false\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/update/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"update",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE UNEXISTING EVENT",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"El código de estado debe ser 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"El cuerpo debe indicar que el evento no fue encontrado\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"message\");\r",
											"    pm.expect(jsonData.message).to.include(\"Event with ID\");\r",
											"    pm.expect(jsonData.message).to.include(\"not found\");\r",
											"    pm.expect(jsonData).to.have.property(\"error\", \"Not Found\");\r",
											"    pm.expect(jsonData).to.have.property(\"statusCode\", 404);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Concierto de Jazz\",\r\n    \"bannerPhotoUrl\": \"https://example.com/new-banner.jpg\",\r\n    \"isPublic\": false\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/update/{{$randomUUID}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"update",
										"{{$randomUUID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE EXISTING EVENT WITH UNAUTHORIZED USER",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"console.log(\"d\")\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la solicitud:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"\r",
											"pm.collectionVariables.set(\"eventId\",\"b663bf37-2a4f-4490-85ef-48e7b892cd34\");\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 403 Forbidden con formato de mensaje válido\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"    pm.response.to.have.jsonBody();\r",
											"\r",
											"    const jsonData = pm.response.json();\r",
											"\r",
											"    // Validar que el mensaje siga el patrón esperado\r",
											"    pm.expect(jsonData.message).to.match(/^User .* needs a valid role$/);\r",
											"\r",
											"    console.log(\"✅ Mensaje con formato válido:\", jsonData.message);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Updated Event Name\",\r\n    \"bannerPhotoUrl\": \"https://example.com/updated-banner.jpg\",\r\n    \"isPublic\": false\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/update/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"update",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE EXISTING EVENT NO AUTH",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 403 Forbidden con formato de mensaje válido\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"    pm.response.to.have.jsonBody();\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"Updated Event Name\",\r\n    \"bannerPhotoUrl\": \"https://example.com/updated-banner.jpg\",\r\n    \"isPublic\": false\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/event/update/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"update",
										"{{eventId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "DELETE",
					"item": [
						{
							"name": "DELETE EXISTING EVENT MINE",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 or 204\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 204]);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body is empty or contains success message\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/delete/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"delete",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE EXISTING EVENT NOT MINE",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para hacer login con otro usuario\r",
											"function loginConSamubar() {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: \"samubar@gmail.com\",\r",
											"                password: password // Usamos la misma contraseña, puedes cambiarla si es distinta\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al hacer login con samubar:\", err);\r",
											"        } else {\r",
											"            const nuevoToken = res.json().token;\r",
											"            if (nuevoToken) {\r",
											"                pm.collectionVariables.set(\"token\", nuevoToken);\r",
											"                console.log(\"Nuevo token guardado para samubar@gmail.com:\", nuevoToken);\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta de samubar.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"                loginConSamubar(); // Hacer login con el otro usuario después de crear el evento\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente);\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"El status debe ser 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"El body debe contener un mensaje de error\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"message\", \"You can only delete your own events\");\r",
											"    pm.expect(jsonData).to.have.property(\"error\", \"Forbidden\");\r",
											"    pm.expect(jsonData).to.have.property(\"statusCode\", 403);\r",
											"});\r",
											"\r",
											"pm.test(\"El tipo de respuesta debe ser JSON\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    pm.response.to.be.withBody;\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/delete/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"delete",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE EXISTING EVENT NOT FOUND",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para hacer login con otro usuario\r",
											"function loginConSamubar() {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: \"samubar@gmail.com\",\r",
											"                password: password // Usamos la misma contraseña, puedes cambiarla si es distinta\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al hacer login con samubar:\", err);\r",
											"        } else {\r",
											"            const nuevoToken = res.json().token;\r",
											"            if (nuevoToken) {\r",
											"                pm.collectionVariables.set(\"token\", nuevoToken);\r",
											"                console.log(\"Nuevo token guardado para samubar@gmail.com:\", nuevoToken);\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta de samubar.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const eventId = res.json().id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"                loginConSamubar(); // Hacer login con el otro usuario después de crear el evento\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente);\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 404 si el evento no existe\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"\r",
											"    const body = pm.response.json();\r",
											"\r",
											"    pm.expect(body).to.have.property(\"error\", \"Not Found\");\r",
											"    pm.expect(body).to.have.property(\"statusCode\", 404);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/delete/{{$randomUUID}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"delete",
										"{{$randomUUID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE EXISTING EVENT WITH UNAUTHORIZED USER",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"const eventUrl = `${baseUrl}/api/event/create`;\r",
											"\r",
											"// Hacer la solicitud de autenticación\r",
											"\r",
											"pm.collectionVariables.set(\"eventId\",\"bd284937-dddc-4c64-b6ab-91d43ce176d9\");\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud de autenticación:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        }\r",
											"\r",
											"        // Hacer la solicitud para crear el evento\r",
											"        pm.sendRequest({\r",
											"            url: eventUrl,\r",
											"            method: \"POST\",\r",
											"            header: {\r",
											"                \"Content-Type\": \"application/json\",\r",
											"                \"Authorization\": `Bearer ${token}`\r",
											"            },\r",
											"            body: {\r",
											"                mode: \"raw\",\r",
											"                raw: JSON.stringify({\r",
											"                    name: \"Concierto de Rock\",\r",
											"                    bannerPhotoUrl: \"https://example.com/banner.jpg\",\r",
											"                    isPublic: true,\r",
											"                    userId: \"b663bf37-2a4f-4490-85ef-48e7b892cd34\"\r",
											"                })\r",
											"            }\r",
											"        }, function (eventErr, eventRes) {\r",
											"            if (eventErr) {\r",
											"                console.log(\"Error al crear el evento:\", eventErr);\r",
											"            } else {\r",
											"                const eventId = eventRes.json()._id;\r",
											"                if (eventId) {\r",
											"                    pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                    console.log(\"Evento creado con ID:\", eventId);\r",
											"                }\r",
											"            }\r",
											"        });\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 403 Forbidden con mensaje de rol inválido\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"    pm.response.to.have.jsonBody();\r",
											"\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.message).to.match(/^User .* needs a valid role$/);\r",
											"\r",
											"    console.log(\"✅ Formato de mensaje validado:\", jsonData.message);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/delete/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"delete",
										"{{eventId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE EXISTING EVENT NOT AUTH",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"const eventUrl = `${baseUrl}/api/event/create`;\r",
											"\r",
											"// Hacer la solicitud de autenticación\r",
											"\r",
											"pm.collectionVariables.set(\"eventId\",\"bd284937-dddc-4c64-b6ab-91d43ce176d9\");\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud de autenticación:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        }\r",
											"\r",
											"        // Hacer la solicitud para crear el evento\r",
											"        pm.sendRequest({\r",
											"            url: eventUrl,\r",
											"            method: \"POST\",\r",
											"            header: {\r",
											"                \"Content-Type\": \"application/json\",\r",
											"                \"Authorization\": `Bearer ${token}`\r",
											"            },\r",
											"            body: {\r",
											"                mode: \"raw\",\r",
											"                raw: JSON.stringify({\r",
											"                    name: \"Concierto de Rock\",\r",
											"                    bannerPhotoUrl: \"https://example.com/banner.jpg\",\r",
											"                    isPublic: true,\r",
											"                    userId: \"b663bf37-2a4f-4490-85ef-48e7b892cd34\"\r",
											"                })\r",
											"            }\r",
											"        }, function (eventErr, eventRes) {\r",
											"            if (eventErr) {\r",
											"                console.log(\"Error al crear el evento:\", eventErr);\r",
											"            } else {\r",
											"                const eventId = eventRes.json()._id;\r",
											"                if (eventId) {\r",
											"                    pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                    console.log(\"Evento creado con ID:\", eventId);\r",
											"                }\r",
											"            }\r",
											"        });\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Debe retornar 403 Forbidden con mensaje de rol inválido\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"    pm.response.to.have.jsonBody();\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/event/delete/{{eventId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"event",
										"delete",
										"{{eventId}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Tickets",
			"item": [
				{
					"name": "GET",
					"item": [
						{
							"name": "GET ALL TICKET LIST",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test for response time\r",
											"pm.test(\"Response time is less than 1000ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response body has 'id', 'buyDate', 'isRedeemed', 'isActive', 'quantity' properties\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array').that.is.not.empty;\r",
											"    pm.expect(jsonData[0]).to.have.property('id');\r",
											"    pm.expect(jsonData[0]).to.have.property('buyDate');\r",
											"    pm.expect(jsonData[0]).to.have.property('isRedeemed');\r",
											"    pm.expect(jsonData[0]).to.have.property('isActive');\r",
											"    pm.expect(jsonData[0]).to.have.property('quantity');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET ALL TICKET NO USER",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response contains message and statusCode\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property(\"message\");\r",
											"    pm.expect(responseBody).to.have.property(\"statusCode\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}\t",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET ALL TICKET LIST WITHOUT AUTH",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"pm.test(\"Response contains message and statusCode\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody).to.have.property(\"message\");\r",
											"    pm.expect(responseBody).to.have.property(\"statusCode\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{userTicketToken}}\t",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets"
									]
								}
							},
							"response": []
						},
						{
							"name": "New Request",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/seed",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"seed"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "POST",
					"item": [
						{
							"name": "BUY A TICKET",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const userEmail = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear la presentación con el eventId\r",
											"function crearPresentacion(eventId, token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/presentation`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"place\": \"Campin\",\r",
											"                \"capacity\": 4000,\r",
											"                \"openDate\": \"2025-05-06T08:00:00Z\",\r",
											"                \"startDate\": \"2025-05-06T10:00:00Z\",\r",
											"                \"latitude\": 6.25184,\r",
											"                \"longitude\": -75.56359,\r",
											"                \"description\": \"A musical event in the main stadium.\",\r",
											"                \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r",
											"                \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r",
											"                \"city\": \"Bogota\",\r",
											"                \"price\": 50000,\r",
											"                \"eventId\": eventId\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear presentación:\", err);\r",
											"        } else {\r",
											"            const presentation = res.json();\r",
											"            if (presentation && presentation.idPresentation) {\r",
											"                pm.collectionVariables.set(\"presentationId\", presentation.idPresentation);\r",
											"                console.log(\"Presentación creada con ID:\", presentation.idPresentation);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID de la presentación en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento\r",
											"function crearEvento(token, callback) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const event = res.json();\r",
											"            const eventId = event.id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"                crearPresentacion(eventId, token);\r",
											"                if (callback) callback(); // Ejecutar paso siguiente\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Login con credenciales y ejecutar acción con el token obtenido\r",
											"function loginYContinuar(correo, clave, callback) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: correo,\r",
											"                password: clave\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en autenticación con\", correo, \":\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                console.log(\"Token obtenido para\", correo, \":\", token);\r",
											"                if (callback) callback(token);\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta de\", correo);\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Flujo principal\r",
											"loginYContinuar(email, password, function (tokenEventManager) {\r",
											"    // Crear evento y presentación con el token de eventmanageEmail\r",
											"    crearEvento(tokenEventManager, function () {\r",
											"        // Luego hacer login con el userEmail y guardar ese token\r",
											"        loginYContinuar(userEmail, password, function (tokenUsuario) {\r",
											"            pm.collectionVariables.set(\"token\", tokenUsuario);\r",
											"            console.log(\"Nuevo token guardado (usuario):\", tokenUsuario);\r",
											"        });\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"presentationId\": \"{{presentationId}}\",\r\n    \"quantity\": 2\r\n}\r\n        \r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/buy",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"buy"
									]
								}
							},
							"response": []
						},
						{
							"name": "BUY A TICKET NOT PRESENTATION FOUND",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct message and error\", function () {\r",
											"    const res = pm.response.json();\r",
											"    \r",
											"    pm.expect(res).to.have.property(\"message\", \"Presentation not found\");\r",
											"    pm.expect(res).to.have.property(\"error\", \"Not Found\");\r",
											"    pm.expect(res).to.have.property(\"statusCode\", 404);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const userEmail = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear la presentación con el eventId\r",
											"function crearPresentacion(eventId, token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/presentation`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"place\": \"Campin\",\r",
											"                \"capacity\": 4000,\r",
											"                \"openDate\": \"2025-05-06T08:00:00Z\",\r",
											"                \"startDate\": \"2025-05-06T10:00:00Z\",\r",
											"                \"latitude\": 6.25184,\r",
											"                \"longitude\": -75.56359,\r",
											"                \"description\": \"A musical event in the main stadium.\",\r",
											"                \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r",
											"                \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r",
											"                \"city\": \"Bogota\",\r",
											"                \"price\": 50000,\r",
											"                \"eventId\": eventId\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear presentación:\", err);\r",
											"        } else {\r",
											"            const presentation = res.json();\r",
											"            if (presentation && presentation.idPresentation) {\r",
											"                pm.collectionVariables.set(\"presentationId\", presentation.idPresentation);\r",
											"                console.log(\"Presentación creada con ID:\", presentation.idPresentation);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID de la presentación en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento\r",
											"function crearEvento(token, callback) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const event = res.json();\r",
											"            const eventId = event.id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"                crearPresentacion(eventId, token);\r",
											"                if (callback) callback(); // Ejecutar paso siguiente\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Login con credenciales y ejecutar acción con el token obtenido\r",
											"function loginYContinuar(correo, clave, callback) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: correo,\r",
											"                password: clave\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en autenticación con\", correo, \":\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                console.log(\"Token obtenido para\", correo, \":\", token);\r",
											"                if (callback) callback(token);\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta de\", correo);\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Flujo principal\r",
											"loginYContinuar(email, password, function (tokenEventManager) {\r",
											"    // Crear evento y presentación con el token de eventmanageEmail\r",
											"    crearEvento(tokenEventManager, function () {\r",
											"        // Luego hacer login con el userEmail y guardar ese token\r",
											"        loginYContinuar(userEmail, password, function (tokenUsuario) {\r",
											"            pm.collectionVariables.set(\"token\", tokenUsuario);\r",
											"            console.log(\"Nuevo token guardado (usuario):\", tokenUsuario);\r",
											"        });\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"presentationId\": \"{{$randomUUID}}\",\r\n    \"quantity\": 2\r\n}\r\n        \r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/buy",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"buy"
									]
								}
							},
							"response": []
						},
						{
							"name": "BUY A TICKET NOT CLIENT",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"El usuario necesita un rol válido (403 Forbidden)\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"\r",
											"    const jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"message\");\r",
											"    pm.expect(jsonData.message).to.match(/needs a valid role/i);\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"error\", \"Forbidden\");\r",
											"    pm.expect(jsonData).to.have.property(\"statusCode\", 403);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear la presentación con el eventId\r",
											"function crearPresentacion(eventId, token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/presentation`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"place\": \"Campin\",\r",
											"                \"capacity\": 4000,\r",
											"                \"openDate\": \"2025-05-06T08:00:00Z\",\r",
											"                \"startDate\": \"2025-05-06T10:00:00Z\",\r",
											"                \"latitude\": 6.25184,\r",
											"                \"longitude\": -75.56359,\r",
											"                \"description\": \"A musical event in the main stadium.\",\r",
											"                \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r",
											"                \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r",
											"                \"city\": \"Bogota\",\r",
											"                \"price\": 50000,\r",
											"                \"eventId\": eventId\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear presentación:\", err);\r",
											"        } else {\r",
											"            const presentation = res.json();\r",
											"            if (presentation && presentation.idPresentation) {\r",
											"                pm.collectionVariables.set(\"presentationId\", presentation.idPresentation);\r",
											"                console.log(\"Presentación creada con ID:\", presentation.idPresentation);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID de la presentación en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const event = res.json();\r",
											"            const eventId = event.id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"\r",
											"                // Crear la presentación usando el eventId\r",
											"                crearPresentacion(eventId, token);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"presentationId\": \"{{presentationId}}\",\r\n    \"quantity\": 2\r\n}\r\n        \r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/buy",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"buy"
									]
								}
							},
							"response": []
						},
						{
							"name": "BUY A TICKET NO AUTH",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Acceso no autorizado (401 Unauthorized)\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"\r",
											"    const jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"message\", \"Unauthorized\");\r",
											"    pm.expect(jsonData).to.have.property(\"statusCode\", 401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"presentationId\": \"{{presentationId}}\",\r\n    \"quantity\": 2\r\n}\r\n        \r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/buy",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"buy"
									]
								}
							},
							"response": []
						},
						{
							"name": "New Request",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"presentationId\": \"{{$randomUUID}}\",\r\n    \"quantity\": 2\r\n}\r\n        \r\n"
								},
								"url": {
									"raw": "https://770d-186-112-9-69.ngrok-free.app/api/webhook/stripe",
									"protocol": "https",
									"host": [
										"770d-186-112-9-69",
										"ngrok-free",
										"app"
									],
									"path": [
										"api",
										"webhook",
										"stripe"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "PUT",
					"item": [
						{
							"name": "REDEEM TICKET",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const ticketEmail = pm.collectionVariables.get(\"ticketEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Paso 1: Obtener seed y extraer un activeTicketId\r",
											"pm.sendRequest({\r",
											"    url: `${baseUrl}/api/seed`,\r",
											"    method: \"GET\"\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al obtener /api/seed:\", err);\r",
											"    } else {\r",
											"        const seedData = res.json();\r",
											"        const activeTicketIds = seedData.activeTicketIds;\r",
											"\r",
											"        if (activeTicketIds && activeTicketIds.length > 0) {\r",
											"            const selectedTicketId = activeTicketIds[0];\r",
											"            pm.collectionVariables.set(\"ticketId\", selectedTicketId);\r",
											"            console.log(\"ID de presentación seleccionado:\", selectedTicketId);\r",
											"\r",
											"            // Paso 2: Login con ticketEmail\r",
											"            pm.sendRequest({\r",
											"                url: authUrl,\r",
											"                method: \"POST\",\r",
											"                header: {\r",
											"                    \"Content-Type\": \"application/json\"\r",
											"                },\r",
											"                body: {\r",
											"                    mode: \"raw\",\r",
											"                    raw: JSON.stringify({\r",
											"                        email: ticketEmail,\r",
											"                        password: password\r",
											"                    })\r",
											"                }\r",
											"            }, function (err, res) {\r",
											"                if (err) {\r",
											"                    console.log(\"Error al autenticar con ticketEmail:\", err);\r",
											"                } else {\r",
											"                    const token = res.json().token;\r",
											"                    if (token) {\r",
											"                        pm.collectionVariables.set(\"token\", token);\r",
											"                        console.log(\"Token guardado correctamente:\", token);\r",
											"                        // Aquí podrías invocar otra función, si necesitas continuar el flujo\r",
											"                    } else {\r",
											"                        console.log(\"No se encontró un token en la respuesta de login.\");\r",
											"                    }\r",
											"                }\r",
											"            });\r",
											"\r",
											"        } else {\r",
											"            console.log(\"No se encontraron activeTicketIds en la respuesta de seed.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test 1: Verify the status code is 200\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test 2: Verify the response time is less than 1000ms\r",
											"pm.test(\"Response time is less than 1000ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
											"});\r",
											"\r",
											"// Test 3: Verify the response body properties\r",
											"pm.test(\"Verify the response body properties\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.id).to.exist;\r",
											"    pm.expect(jsonData.buyDate).to.exist;\r",
											"    pm.expect(jsonData.isRedeemed).to.equal(true);\r",
											"    pm.expect(jsonData.isActive).to.equal(true);\r",
											"    pm.expect(jsonData.quantity).to.equal(1);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"isRedeemed\":true\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/{{ticketId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"{{ticketId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "REDEEM TICKET ALREADY REDEMEED",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const ticketEmail = pm.collectionVariables.get(\"ticketEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Paso 1: Obtener seed y extraer un activeTicketId\r",
											"pm.sendRequest({\r",
											"    url: `${baseUrl}/api/seed`,\r",
											"    method: \"GET\"\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al obtener /api/seed:\", err);\r",
											"    } else {\r",
											"        const seedData = res.json();\r",
											"        const activeTicketIds = seedData.activeTicketIds;\r",
											"\r",
											"        if (activeTicketIds && activeTicketIds.length > 0) {\r",
											"            const selectedTicketId = activeTicketIds[0];\r",
											"            pm.collectionVariables.set(\"ticketId\", selectedTicketId);\r",
											"            console.log(\"ID de presentación seleccionado:\", selectedTicketId);\r",
											"\r",
											"            // Paso 2: Login con ticketEmail\r",
											"            pm.sendRequest({\r",
											"                url: authUrl,\r",
											"                method: \"POST\",\r",
											"                header: {\r",
											"                    \"Content-Type\": \"application/json\"\r",
											"                },\r",
											"                body: {\r",
											"                    mode: \"raw\",\r",
											"                    raw: JSON.stringify({\r",
											"                        email: ticketEmail,\r",
											"                        password: password\r",
											"                    })\r",
											"                }\r",
											"            }, function (err, res) {\r",
											"                if (err) {\r",
											"                    console.log(\"Error al autenticar con ticketEmail:\", err);\r",
											"                } else {\r",
											"                    const token = res.json().token;\r",
											"                    if (token) {\r",
											"                        pm.collectionVariables.set(\"token\", token);\r",
											"                        console.log(\"Token guardado correctamente:\", token);\r",
											"\r",
											"                        // Paso 3: Hacer PUT a /api/tickets/{{ticketId}} con isRedeemed: true\r",
											"                        const ticketId = selectedTicketId;\r",
											"                        const putUrl = `${baseUrl}/api/tickets/${ticketId}`;\r",
											"                        pm.sendRequest({\r",
											"                            url: putUrl,\r",
											"                            method: \"PUT\",\r",
											"                            header: {\r",
											"                                \"Content-Type\": \"application/json\",\r",
											"                                \"Authorization\": `Bearer ${token}`\r",
											"                            },\r",
											"                            body: {\r",
											"                                mode: \"raw\",\r",
											"                                raw: JSON.stringify({\r",
											"                                    isRedeemed: true\r",
											"                                })\r",
											"                            }\r",
											"                        }, function (err, res) {\r",
											"                            if (err) {\r",
											"                                console.log(\"Error al hacer PUT a ticket:\", err);\r",
											"                            } else {\r",
											"                                console.log(\"PUT exitoso. Ticket marcado como redimido.\");\r",
											"                            }\r",
											"                        });\r",
											"\r",
											"                    } else {\r",
											"                        console.log(\"No se encontró un token en la respuesta de login.\");\r",
											"                    }\r",
											"                }\r",
											"            });\r",
											"\r",
											"        } else {\r",
											"            console.log(\"No se encontraron activeTicketIds en la respuesta de seed.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is JSON\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct error message\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.message).to.eql(\"Cannot update already redeemed ticket\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct error type\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.error).to.eql(\"Bad Request\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct statusCode\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.statusCode).to.eql(400);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"isRedeemed\":true\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/{{ticketId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"{{ticketId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "REDEEM TICKET UNACTIVE",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const ticketEmail = pm.collectionVariables.get(\"ticketEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Paso 1: Obtener seed y extraer un activeTicketId\r",
											"pm.sendRequest({\r",
											"    url: `${baseUrl}/api/seed`,\r",
											"    method: \"GET\"\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al obtener /api/seed:\", err);\r",
											"    } else {\r",
											"        const seedData = res.json();\r",
											"        const unactiveTicketIds = seedData.unactiveTicketIds;\r",
											"\r",
											"        if (unactiveTicketIds && unactiveTicketIds.length > 0) {\r",
											"            const selectedTicketId = unactiveTicketIds[0];\r",
											"            pm.collectionVariables.set(\"ticketId\", selectedTicketId);\r",
											"            console.log(\"ID de presentación seleccionado:\", selectedTicketId);\r",
											"\r",
											"            // Paso 2: Login con ticketEmail\r",
											"            pm.sendRequest({\r",
											"                url: authUrl,\r",
											"                method: \"POST\",\r",
											"                header: {\r",
											"                    \"Content-Type\": \"application/json\"\r",
											"                },\r",
											"                body: {\r",
											"                    mode: \"raw\",\r",
											"                    raw: JSON.stringify({\r",
											"                        email: ticketEmail,\r",
											"                        password: password\r",
											"                    })\r",
											"                }\r",
											"            }, function (err, res) {\r",
											"                if (err) {\r",
											"                    console.log(\"Error al autenticar con ticketEmail:\", err);\r",
											"                } else {\r",
											"                    const token = res.json().token;\r",
											"                    if (token) {\r",
											"                        pm.collectionVariables.set(\"token\", token);\r",
											"                        console.log(\"Token guardado correctamente:\", token);\r",
											"                        // Aquí podrías invocar otra función, si necesitas continuar el flujo\r",
											"                    } else {\r",
											"                        console.log(\"No se encontró un token en la respuesta de login.\");\r",
											"                    }\r",
											"                }\r",
											"            });\r",
											"\r",
											"        } else {\r",
											"            console.log(\"No se encontraron unactiveTicketIds en la respuesta de seed.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is JSON\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct error message\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.message).to.eql(\"Cannot redeem unactive ticket\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct error type\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.error).to.eql(\"Bad Request\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response has correct statusCode\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.statusCode).to.eql(400);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"isRedeemed\":true\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/{{ticketId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"{{ticketId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "REEDEM TICKET WITHOUT AUTH",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const ticketEmail = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Paso 1: Obtener seed y extraer un activeTicketId\r",
											"pm.sendRequest({\r",
											"    url: `${baseUrl}/api/seed`,\r",
											"    method: \"GET\"\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error al obtener /api/seed:\", err);\r",
											"    } else {\r",
											"        const seedData = res.json();\r",
											"        const activeTicketIds = seedData.activeTicketIds;\r",
											"\r",
											"        if (activeTicketIds && activeTicketIds.length > 0) {\r",
											"            const selectedTicketId = activeTicketIds[0];\r",
											"            pm.collectionVariables.set(\"ticketId\", selectedTicketId);\r",
											"            console.log(\"ID de presentación seleccionado:\", selectedTicketId);\r",
											"\r",
											"            // Paso 2: Login con ticketEmail\r",
											"            pm.sendRequest({\r",
											"                url: authUrl,\r",
											"                method: \"POST\",\r",
											"                header: {\r",
											"                    \"Content-Type\": \"application/json\"\r",
											"                },\r",
											"                body: {\r",
											"                    mode: \"raw\",\r",
											"                    raw: JSON.stringify({\r",
											"                        email: ticketEmail,\r",
											"                        password: password\r",
											"                    })\r",
											"                }\r",
											"            }, function (err, res) {\r",
											"                if (err) {\r",
											"                    console.log(\"Error al autenticar con ticketEmail:\", err);\r",
											"                } else {\r",
											"                    const token = res.json().token;\r",
											"                    if (token) {\r",
											"                        pm.collectionVariables.set(\"token\", token);\r",
											"                        console.log(\"Token guardado correctamente:\", token);\r",
											"                        // Aquí podrías invocar otra función, si necesitas continuar el flujo\r",
											"                    } else {\r",
											"                        console.log(\"No se encontró un token en la respuesta de login.\");\r",
											"                    }\r",
											"                }\r",
											"            });\r",
											"\r",
											"        } else {\r",
											"            console.log(\"No se encontraron activeTicketIds en la respuesta de seed.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test 1: Verify the status code is 403\r",
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"isRedeemed\":true\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/tickets/{{ticketId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"tickets",
										"{{ticketId}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Report",
			"item": [
				{
					"name": "GENERATE SALES REPORT",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"\r",
									"// Test for presence of fields in 'ticketsPorVendedor'\r",
									"const response = pm.response.json();\r",
									"pm.test(\"Verify presence of fields in 'ticketsPorVendedor'\", function () {\r",
									"    pm.expect(response.ticketsPorVendedor).to.be.an('array').that.is.not.empty;\r",
									"    response.ticketsPorVendedor.forEach((ticket) => {\r",
									"        pm.expect(ticket).to.have.property('userId');\r",
									"        pm.expect(ticket).to.have.property('userName');\r",
									"        pm.expect(ticket).to.have.property('userLastname');\r",
									"        pm.expect(ticket).to.have.property('totalTickets');\r",
									"    });\r",
									"});\r",
									"\r",
									"// Test for presence of fields in 'ticketsPorEvento'\r",
									"pm.test(\"Verify presence of fields in 'ticketsPorEvento'\", function () {\r",
									"    pm.expect(response.ticketsPorEvento).to.be.an('array').that.is.not.empty;\r",
									"    response.ticketsPorEvento.forEach((ticket) => {\r",
									"        pm.expect(ticket).to.have.property('eventId');\r",
									"        pm.expect(ticket).to.have.property('eventName');\r",
									"        pm.expect(ticket).to.have.property('totalTickets');\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
									"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"\r",
									"const authUrl = `${baseUrl}/api/auth/login`;\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: authUrl,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            email: email,\r",
									"            password: password\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error en la solicitud:\", err);\r",
									"    } else {\r",
									"        const token = res.json().token;\r",
									"        \r",
									"        if (token) {\r",
									"            pm.collectionVariables.set(\"token\", token);\r",
									"            console.log(\"Token guardado:\", token);\r",
									"        } else {\r",
									"            console.log(\"No se encontró un token en la respuesta.\");\r",
									"        }\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableCookies": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/report/sales",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"report",
								"sales"
							]
						}
					},
					"response": []
				},
				{
					"name": "GENERATE SALES REPORT NOT ADMIN",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"\r",
									"pm.test(\"Response body has the expected fields\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody).to.have.property(\"message\");\r",
									"    pm.expect(responseBody).to.have.property(\"error\");\r",
									"    pm.expect(responseBody).to.have.property(\"statusCode\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar un correo electrónico aleatorio\r",
									"function generateRandomEmail() {\r",
									"    const randomString = Math.random().toString(36).substring(2, 10);\r",
									"    return `user_${randomString}@example.com`;\r",
									"}\r",
									"\r",
									"const url = pm.collectionVariables.get(\"base_url\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"const randomEmail = generateRandomEmail();\r",
									"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
									"\r",
									"// Registrar un nuevo usuario\r",
									"pm.sendRequest({\r",
									"    url: `${url}/api/auth/register`,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            name: \"Isabella\",\r",
									"            lastname: \"Ocampo\",\r",
									"            email: randomEmail,\r",
									"            password: password\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error al registrar usuario:\", err);\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    const user = res.json().user;\r",
									"    const token = res.json().token;\r",
									"    if (!user || !user.id || !token) {\r",
									"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    pm.collectionVariables.set(\"userId\", user.id);\r",
									"    pm.collectionVariables.set(\"token\", token);\r",
									"\r",
									"    console.log(\"Usuario registrado. ID:\", user.id);\r",
									"    console.log(\"Usuario registrado. Token:\", token);\r",
									"\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableCookies": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/report/sales",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"report",
								"sales"
							]
						}
					},
					"response": []
				},
				{
					"name": "GENERATE SALES REPORT UNAUTHENTICATED",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"// Test for response body message\r",
									"pm.test(\"Response body has message field\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.exist;\r",
									"    pm.expect(responseBody.message).to.equal(\"Unauthorized\");\r",
									"});\r",
									"\r",
									"// Test for response body statusCode\r",
									"pm.test(\"Response body has statusCode field\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.statusCode).to.exist;\r",
									"    pm.expect(responseBody.statusCode).to.equal(401);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableCookies": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/report/sales",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"report",
								"sales"
							]
						}
					},
					"response": []
				},
				{
					"name": "GENERATE OCUPATION REPORT",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"// Test for specific fields in the response\r",
									"pm.test(\"Each item has the required fields\", function () {\r",
									"    const response = pm.response.json();\r",
									"    response.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"eventId\");\r",
									"        pm.expect(item).to.have.property(\"eventName\");\r",
									"        pm.expect(item).to.have.property(\"totalTickets\");\r",
									"        pm.expect(item).to.have.property(\"redeemedTickets\");\r",
									"        pm.expect(item).to.have.property(\"activeTickets\");\r",
									"        pm.expect(item).to.have.property(\"redeemedToActiveRatio\");\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
									"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"\r",
									"const authUrl = `${baseUrl}/api/auth/login`;\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: authUrl,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            email: email,\r",
									"            password: password\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error en la solicitud:\", err);\r",
									"    } else {\r",
									"        const token = res.json().token;\r",
									"        \r",
									"        if (token) {\r",
									"            pm.collectionVariables.set(\"token\", token);\r",
									"            console.log(\"Token guardado:\", token);\r",
									"        } else {\r",
									"            console.log(\"No se encontró un token en la respuesta.\");\r",
									"        }\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableCookies": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/report/ocupation",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"report",
								"ocupation"
							]
						}
					},
					"response": []
				},
				{
					"name": "GENERATE OCUPATION REPORT NOT ADMIN",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"// Test for error message\r",
									"pm.test(\"Error message is present\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.error).to.equal(\"Forbidden\");\r",
									"});\r",
									"\r",
									"// Test for message field\r",
									"pm.test(\"Message field is present\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property('message');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar un correo electrónico aleatorio\r",
									"function generateRandomEmail() {\r",
									"    const randomString = Math.random().toString(36).substring(2, 10);\r",
									"    return `user_${randomString}@example.com`;\r",
									"}\r",
									"\r",
									"const url = pm.collectionVariables.get(\"base_url\");\r",
									"const password = pm.collectionVariables.get(\"password\");\r",
									"const randomEmail = generateRandomEmail();\r",
									"pm.collectionVariables.set(\"randomEmail\", randomEmail);\r",
									"\r",
									"// Registrar un nuevo usuario\r",
									"pm.sendRequest({\r",
									"    url: `${url}/api/auth/register`,\r",
									"    method: \"POST\",\r",
									"    header: {\r",
									"        \"Content-Type\": \"application/json\"\r",
									"    },\r",
									"    body: {\r",
									"        mode: \"raw\",\r",
									"        raw: JSON.stringify({\r",
									"            name: \"Isabella\",\r",
									"            lastname: \"Ocampo\",\r",
									"            email: randomEmail,\r",
									"            password: password\r",
									"        })\r",
									"    }\r",
									"}, function (err, res) {\r",
									"    if (err) {\r",
									"        console.log(\"Error al registrar usuario:\", err);\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    const user = res.json().user;\r",
									"    const token = res.json().token;\r",
									"    if (!user || !user.id || !token) {\r",
									"        console.log(\"No se obtuvo el ID o el token del usuario.\");\r",
									"        return;\r",
									"    }\r",
									"\r",
									"    pm.collectionVariables.set(\"userId\", user.id);\r",
									"    pm.collectionVariables.set(\"token\", token);\r",
									"\r",
									"    console.log(\"Usuario registrado. ID:\", user.id);\r",
									"    console.log(\"Usuario registrado. Token:\", token);\r",
									"\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableCookies": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/report/ocupation",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"report",
								"ocupation"
							]
						}
					},
					"response": []
				},
				{
					"name": "GENERATE OCUPATION REPORT UNAUTHENTICATED",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"// Test for unauthorized message\r",
									"pm.test(\"Response message is Unauthorized\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Unauthorized\");\r",
									"});\r",
									"\r",
									"// Test for statusCode field\r",
									"pm.test(\"Response statusCode is 401\", function () {\r",
									"    pm.expect(pm.response.json().statusCode).to.equal(401);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableCookies": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/report/ocupation",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"report",
								"ocupation"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Presentations",
			"item": [
				{
					"name": "POST",
					"item": [
						{
							"name": "CREATE PRESENTATION",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Variables de colección\r",
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"// Función para crear la presentación con el eventId\r",
											"function crearPresentacion(eventId, token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/presentation`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"place\": \"Campin\",\r",
											"                \"capacity\": 4000,\r",
											"                \"openDate\": \"2025-05-06T08:00:00Z\",\r",
											"                \"startDate\": \"2025-05-06T10:00:00Z\",\r",
											"                \"latitude\": 6.25184,\r",
											"                \"longitude\": -75.56359,\r",
											"                \"description\": \"A musical event in the main stadium.\",\r",
											"                \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r",
											"                \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r",
											"                \"city\": \"Bogota\",\r",
											"                \"price\": 50000,\r",
											"                \"eventId\": eventId\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear presentación:\", err);\r",
											"        } else {\r",
											"            const presentation = res.json();\r",
											"            if (presentation && presentation.idPresentation) {\r",
											"                pm.collectionVariables.set(\"presentationId\", presentation.idPresentation);\r",
											"                console.log(\"Presentación creada con ID:\", presentation.idPresentation);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID de la presentación en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Función para crear el evento después de obtener el token\r",
											"function crearEvento(token) {\r",
											"    pm.sendRequest({\r",
											"        url: `${baseUrl}/api/event/create`,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\",\r",
											"            \"Authorization\": `Bearer ${token}`\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                \"name\": \"Concierto de Rock\",\r",
											"                \"bannerPhotoUrl\": \"https://example.com/banner.jpg\",\r",
											"                \"isPublic\": true\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error al crear evento:\", err);\r",
											"        } else {\r",
											"            const event = res.json();\r",
											"            const eventId = event.id;\r",
											"            if (eventId) {\r",
											"                pm.collectionVariables.set(\"eventId\", eventId);\r",
											"                console.log(\"Evento creado con ID:\", eventId);\r",
											"\r",
											"                // Crear la presentación usando el eventId\r",
											"                crearPresentacion(eventId, token);\r",
											"            } else {\r",
											"                console.log(\"No se encontró el ID del evento en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"\r",
											"// Comprobar si ya hay token\r",
											"const tokenExistente = false;\r",
											"if (!tokenExistente) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la autenticación:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"                crearEvento(token); // Crear evento después de guardar el token\r",
											"            } else {\r",
											"                console.log(\"No se encontró un token en la respuesta.\");\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"} else {\r",
											"    console.log(\"Usando token existente.\");\r",
											"    crearEvento(tokenExistente); // Crear evento directamente si ya hay token\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// Test for response time\r",
											"pm.test(\"Response time is less than 800ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(800);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"const responseBody = pm.response.json();\r",
											"pm.test(\"Response has idPresentation\", function () {\r",
											"    pm.expect(responseBody.idPresentation).to.exist;\r",
											"});\r",
											"pm.test(\"Response has place\", function () {\r",
											"    pm.expect(responseBody.place).to.equal(\"Atanasio Girardot\");\r",
											"});\r",
											"pm.test(\"Response has event details\", function () {\r",
											"    pm.expect(responseBody.event).to.be.an('object');\r",
											"});\r",
											"pm.test(\"Event has name and isPublic\", function () {\r",
											"    pm.expect(responseBody.event.name).to.equal(\"Concierto de Rock\");\r",
											"    pm.expect(responseBody.event.isPublic).to.be.true;\r",
											"});\r",
											"pm.test(\"Response has capacity and price\", function () {\r",
											"    pm.expect(responseBody.capacity).to.equal(500);\r",
											"    pm.expect(responseBody.price).to.equal(50000);\r",
											"});\r",
											"pm.test(\"Response has open and start date\", function () {\r",
											"    pm.expect(responseBody.openDate).to.equal(\"2025-05-06T08:00:00Z\");\r",
											"    pm.expect(responseBody.startDate).to.equal(\"2025-05-06T10:00:00Z\");\r",
											"});\r",
											"pm.test(\"Response has latitude, longitude, and description\", function () {\r",
											"    pm.expect(responseBody.latitude).to.equal(6.25184);\r",
											"    pm.expect(responseBody.longitude).to.equal(-75.56359);\r",
											"    pm.expect(responseBody.description).to.equal(\"A musical event in the main stadium.\");\r",
											"});\r",
											"pm.test(\"Response has ticket availability and sale dates\", function () {\r",
											"    pm.expect(responseBody.ticketAvailabilityDate).to.equal(\"2025-04-20T00:00:00Z\");\r",
											"    pm.expect(responseBody.ticketSaleAvailabilityDate).to.equal(\"2025-04-25T00:00:00Z\");\r",
											"});\r",
											"pm.test(\"Response has city\", function () {\r",
											"    pm.expect(responseBody.city).to.equal(\"Medellín\");\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n            \"place\": \"Campin\",\r\n            \"capacity\": 4000,\r\n            \"openDate\": \"2025-05-06T08:00:00Z\",\r\n            \"startDate\": \"2025-05-06T10:00:00Z\",\r\n            \"latitude\": 6.25184,\r\n            \"longitude\": -75.56359,\r\n            \"description\": \"A musical event in the main stadium.\",\r\n            \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r\n            \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r\n            \"city\": \"Bogota\",\r\n            \"price\": 50000,\r\n            \"eventId\": \"0454ccd9-0cb7-4fa7-b05a-7439728ba4fd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/presentation",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation"
									]
								}
							},
							"response": []
						},
						{
							"name": "CREATE PRESENTATION TO DELETE",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"eventmanageEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// Test for response time\r",
											"pm.test(\"Response time is less than 800ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(800);\r",
											"});\r",
											"\r",
											"// Test for response body properties\r",
											"const responseBody = pm.response.json();\r",
											"pm.test(\"Response has idPresentation\", function () {\r",
											"    pm.expect(responseBody.idPresentation).to.exist;\r",
											"});\r",
											"pm.test(\"Response has place\", function () {\r",
											"    pm.expect(responseBody.place).to.equal(\"Atanasio Girardot\");\r",
											"});\r",
											"pm.test(\"Response has event details\", function () {\r",
											"    pm.expect(responseBody.event).to.be.an('object');\r",
											"});\r",
											"pm.test(\"Event has name and isPublic\", function () {\r",
											"    pm.expect(responseBody.event.name).to.equal(\"Concierto de Rock\");\r",
											"    pm.expect(responseBody.event.isPublic).to.be.true;\r",
											"});\r",
											"pm.test(\"Response has capacity and price\", function () {\r",
											"    pm.expect(responseBody.capacity).to.equal(500);\r",
											"    pm.expect(responseBody.price).to.equal(50000);\r",
											"});\r",
											"pm.test(\"Response has open and start date\", function () {\r",
											"    pm.expect(responseBody.openDate).to.equal(\"2025-05-06T08:00:00Z\");\r",
											"    pm.expect(responseBody.startDate).to.equal(\"2025-05-06T10:00:00Z\");\r",
											"});\r",
											"pm.test(\"Response has latitude, longitude, and description\", function () {\r",
											"    pm.expect(responseBody.latitude).to.equal(6.25184);\r",
											"    pm.expect(responseBody.longitude).to.equal(-75.56359);\r",
											"    pm.expect(responseBody.description).to.equal(\"A musical event in the main stadium.\");\r",
											"});\r",
											"pm.test(\"Response has ticket availability and sale dates\", function () {\r",
											"    pm.expect(responseBody.ticketAvailabilityDate).to.equal(\"2025-04-20T00:00:00Z\");\r",
											"    pm.expect(responseBody.ticketSaleAvailabilityDate).to.equal(\"2025-04-25T00:00:00Z\");\r",
											"});\r",
											"pm.test(\"Response has city\", function () {\r",
											"    pm.expect(responseBody.city).to.equal(\"Medellín\");\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n            \"place\": \"Atanasio Girardot\",\r\n            \"capacity\": 500,\r\n            \"openDate\": \"2025-05-06T08:00:00Z\",\r\n            \"startDate\": \"2025-05-06T10:00:00Z\",\r\n            \"latitude\": 6.25184,\r\n            \"longitude\": -75.56359,\r\n            \"description\": \"A musical event in the main stadium.\",\r\n            \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r\n            \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r\n            \"city\": \"Medellín\",\r\n            \"price\": 50000,\r\n            \"eventId\": \"8041f51b-aee3-4135-a3ec-e0d88d555876\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/presentation",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation"
									]
								}
							},
							"response": []
						},
						{
							"name": "CREATE PRESENTATION WITHOUT AUTH",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"userEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is less than 200ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has error message and status code\", function () {\r",
											"    pm.response.to.have.jsonBody('message');\r",
											"    pm.response.to.have.jsonBody('error');\r",
											"    pm.response.to.have.jsonBody('statusCode');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n            \"place\": \"Atanasio Girardot\",\r\n            \"capacity\": 500,\r\n            \"openDate\": \"2025-05-06T08:00:00Z\",\r\n            \"startDate\": \"2025-05-06T10:00:00Z\",\r\n            \"latitude\": 6.25184,\r\n            \"longitude\": -75.56359,\r\n            \"description\": \"A musical event in the main stadium.\",\r\n            \"ticketAvailabilityDate\": \"2025-04-20T00:00:00Z\",\r\n            \"ticketSaleAvailabilityDate\": \"2025-04-25T00:00:00Z\",\r\n            \"city\": \"Medellín\",\r\n            \"price\": 50000,\r\n            \"eventId\": \"8041f51b-aee3-4135-a3ec-e0d88d555876\"\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/presentation",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "GET",
					"item": [
						{
							"name": "GET ALL PRESENTATIONS",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test for response time\r",
											"pm.test(\"Response time is less than 200ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(200);\r",
											"});\r",
											"\r",
											"\r",
											"// Test for the existence of idPresentation in each object of the response body\r",
											"const responseBody = pm.response.json();\r",
											"for (let presentation of responseBody) {\r",
											"    pm.test(`Presentation ID exists for ${presentation.place}`, function () {\r",
											"        pm.expect(presentation).to.have.property(\"idPresentation\");\r",
											"    });\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{base_url}}/api/presentation",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET PRESENTATION BY ID",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: authUrl,\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"Content-Type\": \"application/json\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: JSON.stringify({\r",
											"            email: email,\r",
											"            password: password\r",
											"        })\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (err) {\r",
											"        console.log(\"Error en la solicitud:\", err);\r",
											"    } else {\r",
											"        const token = res.json().token;\r",
											"        \r",
											"        if (token) {\r",
											"            pm.collectionVariables.set(\"token\", token);\r",
											"            console.log(\"Token guardado:\", token);\r",
											"        } else {\r",
											"            console.log(\"No se encontró un token en la respuesta.\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test for content type\r",
											"pm.test(\"Content type is application/json\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json\");\r",
											"});\r",
											"\r",
											"// Test for response time\r",
											"pm.test(\"Response time is less than 300ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(300);\r",
											"});\r",
											"\r",
											"// Test for specific fields in the response body\r",
											"const responseBody = pm.response.json();\r",
											"pm.test(\"Event name is present\", function () {\r",
											"    pm.expect(responseBody.event.name).to.exist;\r",
											"});\r",
											"pm.test(\"Event banner photo URL is present\", function () {\r",
											"    pm.expect(responseBody.event.bannerPhotoUrl).to.exist;\r",
											"});\r",
											"pm.test(\"User email is present\", function () {\r",
											"    pm.expect(responseBody.event.user.email).to.exist;\r",
											"});\r",
											"pm.test(\"Capacity is 4000\", function () {\r",
											"    pm.expect(responseBody.capacity).to.equal(4000);\r",
											"});\r",
											"pm.test(\"Price is 50000\", function () {\r",
											"    pm.expect(responseBody.price).to.equal(50000);\r",
											"});\r",
											"pm.test(\"Description is present\", function () {\r",
											"    pm.expect(responseBody.description).to.exist;\r",
											"});\r",
											"pm.test(\"City is Bogota\", function () {\r",
											"    pm.expect(responseBody.city).to.equal(\"Bogota\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{base_url}}/api/presentation/{{presentationId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation",
										"{{presentationId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET PRESENTATION BY ID WITHOUT AUTH",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for status code\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											"// Test for message and statusCode in the response body\r",
											"pm.test(\"Response body has message and statusCode\", function () {\r",
											"    const response = pm.response.json();\r",
											"    pm.expect(response.message).to.equal(\"Unauthorized\");\r",
											"    pm.expect(response.statusCode).to.equal(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{userTicketToken\n}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/presentation/{{presentationId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation",
										"{{presentationId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "PUT",
					"item": [
						{
							"name": "UPDATE PRESENTATION",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const baseUrl = pm.collectionVariables.get(\"base_url\");\r",
											"const email = pm.collectionVariables.get(\"superadminEmail\");\r",
											"const password = pm.collectionVariables.get(\"password\");\r",
											"\r",
											"const authUrl = `${baseUrl}/api/auth/login`;\r",
											"\r",
											"if (!pm.collectionVariables.get(\"token\")) {\r",
											"    pm.sendRequest({\r",
											"        url: authUrl,\r",
											"        method: \"POST\",\r",
											"        header: {\r",
											"            \"Content-Type\": \"application/json\"\r",
											"        },\r",
											"        body: {\r",
											"            mode: \"raw\",\r",
											"            raw: JSON.stringify({\r",
											"                email: email,\r",
											"                password: password\r",
											"            })\r",
											"        }\r",
											"    }, function (err, res) {\r",
											"        if (err) {\r",
											"            console.log(\"Error en la solicitud:\", err);\r",
											"        } else {\r",
											"            const token = res.json().token;\r",
											"            if (token) {\r",
											"                pm.collectionVariables.set(\"token\", token);\r",
											"                console.log(\"Token guardado:\", token);\r",
											"            }\r",
											"        }\r",
											"    });\r",
											"}\r",
											"pm.collectionVariables.set(\"ticketId\",\"8acc6d3c-c84f-427c-82d9-88cd252df208\");"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test 1: Verify the status code is 200\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test 2: Verify the updated place in the response body\r",
											"pm.test(\"Updated place is reflected in the response\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.place).to.equal(\"Estadio el Campin\");\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n            \"place\": \"Estadio el Campin\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/presentation/{{presentationId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation",
										"{{presentationId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "UPDATE PRESENTATION WITHOUT AUTH",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for the PUT request\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"\r",
											"pm.test(\"Response body has message and statusCode\", function () {\r",
											"    pm.response.to.have.jsonBody('message');\r",
											"    pm.response.to.have.jsonBody('statusCode');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{userTicketToken\n}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n\r\n            \"capacity\": 4500\r\n\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/presentation/{{presentationId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation",
										"{{presentationId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "DELETE",
					"item": [
						{
							"name": "DELETE PRESENTATION",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for the status code\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Test for the response message\r",
											"pm.test(\"Response message is present\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"    pm.expect(responseBody.message).to.exist;\r",
											"    pm.expect(responseBody.message).to.be.a('string');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{base_url}}/api/presentation/{{presentationId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation",
										"{{presentationId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE PRESENTATION WITHOUT AUTH",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Test for DELETE request\r",
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is less than 200ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.lessThan(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body has message and statusCode\", function () {\r",
											"    pm.expect(pm.response.json()).to.have.property('message');\r",
											"    pm.expect(pm.response.json()).to.have.property('statusCode');\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{userTicketToken\n}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{base_url}}/api/presentation/{{presentationId}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"presentation",
										"{{presentationId}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "superadminEmail",
			"value": "alejitocordoba@hotmail.com",
			"type": "string"
		},
		{
			"key": "eventmanageEmail",
			"value": "isabella.ocampo@u.icesi.edu.co",
			"type": "string"
		},
		{
			"key": "userEmail",
			"value": "valentina.gonzalez3@u.icesi.edu.co",
			"type": "string"
		},
		{
			"key": "password",
			"value": "Hola1597!!!",
			"type": "string"
		},
		{
			"key": "randomEmail",
			"value": "",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "eventId",
			"value": "3721cb8c-58f6-4e73-a152-b112c8b6f15c"
		},
		{
			"key": "randomEventName",
			"value": ""
		},
		{
			"key": "cancelTicket",
			"value": "ec4d3ed2-fe58-4bf1-a5a6-7ea592de18d4"
		},
		{
			"key": "userId",
			"value": "456",
			"type": "string"
		},
		{
			"key": "ticketId",
			"value": "8acc6d3c-c84f-427c-82d9-88cd252df208",
			"type": "string"
		},
		{
			"key": "eventToken",
			"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImQ3MjI5YzdiLWVmYTUtNGU4NS1hYWZkLTE5MDZhMGMzNjFjZSIsImlhdCI6MTc0NzA3OTEyOSwiZXhwIjoxNzQ3MDgyNzI5fQ.HV3QLY7q6aTchiJcAyMkfozOWnAr-F7R4d1DE0L5BUs",
			"type": "string"
		},
		{
			"key": "userToken",
			"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjZhNWU0ODA1LWIwYWEtNGUyYS05NzJhLTJlYzMwZGQ0NjNkNCIsImlhdCI6MTc0NzA3OTAzOSwiZXhwIjoxNzQ3MDgyNjM5fQ.nYdHYm_vk0ItJjkDUQW_vkGxSEy0WoyU34J9ZtRN8dg",
			"type": "string"
		},
		{
			"key": "eventManagerToken",
			"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjFiYzZiMGU5LTcxMjMtNDJmYS1iNGE2LTMwYTcyNWIyNmZkMiIsImlhdCI6MTc0NzA5MjYwNSwiZXhwIjoxNzQ3MDk2MjA1fQ.EmAIMr4KPWSfcp8O36o70vIwfZ--o5YgE5ZSJL9so1s",
			"type": "string"
		},
		{
			"key": "userTicketToken",
			"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImM2NDQ2YjMyLTYwYTctNDU1Ni1iNzNiLWUwZDcxNmJlYzk0YyIsImlhdCI6MTc0NzEwMTk4OSwiZXhwIjoxNzQ3MTA1NTg5fQ.cDJi2Tt-j9p5tCXTDNzAd35uB878-KmxcGm0sX3kSd8",
			"type": "string"
		},
		{
			"key": "presentationId",
			"value": "aabe9917-81bd-4555-b17f-fc426afbdb3b",
			"type": "string"
		},
		{
			"key": "cancelPresentation",
			"value": "0281601c-e96a-46a0-bc26-998f470f52a9",
			"type": "string"
		},
		{
			"key": "ticketEmail",
			"value": "ticketchecker@gmail.com",
			"type": "string"
		}
	]
}